<div id="breadcrumbs">
  <a href="{{'/' | relative_url}}">Home</a>
  {% assign crumbs = page.url | remove:'/index.html' | split: '/' %}
  {% if page.collection == 'posts' %}
  {% comment %} News post-specific logic {% endcomment %}
  {% assign news_link = '/news/' + page.categories.first | downcase | replace: ' ', '-' %}
  / <a href="{{news_link | relative_url}}">News</a>
  / <a href="{{news_link | relative_url}}">{{ page.categories.first }}</a>
  / {{ page.title }}
  {% else %}
  {% for crumb in crumbs offset: 1 %}
  {% if forloop.last %}
  {% if page.url == '/membership/' %}
  / <a href="{{'/membership' | relative_url}}">Membership</a> / {{ page.title }}
  {% else %}
  / {{ page.title }}
  {% endif %}
  {% else %}
  / <a
    href="{% assign crumb_limit = forloop.index | plus: 1 %}{% for crumb in crumbs limit: crumb_limit %}{{ crumb | append: '/' | relative_url }}{% endfor %}">{{
    crumb | replace:'-',' ' | remove:'.html' | capitalize }}</a>
  {% endif %}
  {% endfor %}
  {% endif %}
</div>